<h2 class="mb-5">Informations de connexions</h2>
<form [formGroup]="emailForm" (ngSubmit)="saveMailModification()">
  <div class="grid p-fluid">
    <div class="field col-12 md:col-4">
      <span class="p-float-label mb-2">
        <input type="text" id="mail" formControlName="mail" pInputText />
        <label for="mail">Adresse mail*</label>
      </span>
      <div *ngIf="mail?.touched" class="p-error">
        <small *ngIf="mail?.hasError('required')">
          Ce champ est obligatoire, merci de saisir l'information demandé
        </small>
        <small *ngIf="mail?.hasError('email')">
          Il semble y avoir une erreur de saisie ici
        </small>
        <small *ngIf="mail?.hasError('uniqueMail')">
          Un compte est déjà associé à cette adresse email
        </small>
      </div>
      <small
        >Avant de changer d'adresse mail, veuillez vous assurer d'avoir accès à
        la nouvelle adresse mail que vous souhaitez renseigner</small
      >
    </div>
  </div>
  <div
    class="grid p-fluid col-12 md:col-offset-4 md:col-4 justify-content-center"
  >
    <button
      pButton
      pRipple
      [disabled]="emailForm.invalid"
      type="submit"
      label="Mettre à jour"
      class="p-button-raised"
    ></button>
  </div>
</form>
<h4 class="mb-5">Modification du mot de passe</h4>
<form [formGroup]="passwordForm" (ngSubmit)="saveMPasswordModification()">
  <div class="grid p-fluid">
    <div class="field col-12 md:col-4">
      <span class="p-float-label mb-2">
        <input
          type="password"
          id="currentPassword"
          formControlName="currentPassword"
          pInputText
        />
        <label for="currentPassword">Mot de passe actuel*</label>
      </span>
      <div *ngIf="currentPassword?.touched" class="p-error">
        <small *ngIf="currentPassword?.hasError('required')">
          {{messagesErreur[1]}}
        </small>
      </div>
    </div>
    <div class="field col-12 md:col-4">
      <span class="p-float-label mb-2">
        <p-password
          id="newPassword"
          formControlName="newPassword"
          weakLabel="Faible"
          mediumLabel="Moyen"
          strongLabel="Fort"
          promptLabel="Saisir un mot de passe"
          [strongRegex]="strongPasswordRegex"
          (onBlur)="newPassword?.markAsTouched()"
        >
        <ng-template pTemplate="header">
          <h6>Définir un mot de passe</h6>
        </ng-template>
          <ng-template pTemplate="footer">
            <p-divider></p-divider>
            <p class="mt-2">Suggestions</p>
            <ul class="pl-2 ml-2 mt-0 line-height-3">
              <li>Au moins une minuscule</li>
              <li>Au moins une majuscule</li>
              <li>Au moins un chiffre</li>
              <li>Au moins un caractère spécial</li>
              <li>Au moins 8 caractères</li>
            </ul>
          </ng-template>
        </p-password>
        <label for="newPassword">Nouveau mot de passe*</label>
      </span>
      <div *ngIf="newPassword?.touched" class="p-error">
        <small *ngIf="newPassword?.hasError('required')">
          {{messagesErreur[1]}}
        </small>
      </div>
    </div>
    <div class="field col-12 md:col-4">
      <span class="p-float-label mb-2">
        <input
          type="password"
          id="confirmPassword"
          formControlName="confirmPassword"
          pInputText
        />
        <label for="confirmPassword">Confirmation du mot de passe*</label>
      </span>
      <div *ngIf="confirmPassword?.touched" class="p-error">
        <small *ngIf="confirmPassword?.hasError('required')">
          {{messagesErreur[1]}}
        </small>
        <small *ngIf="passwordForm?.hasError('notmatched')">
          {{messagesErreur[0]}}
        </small>
      </div>
    </div>
  </div>
  <div
    class="grid p-fluid col-12 md:col-offset-4 md:col-4 justify-content-center"
  >
    <button
      pButton
      pRipple
      [disabled]="passwordForm.invalid"
      type="submit"
      label="Mettre à jour"
      class="p-button-raised"
    ></button>
  </div>
</form>
